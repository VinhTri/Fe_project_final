/* ======================== TOKENS (phiên bản nền đặc) ======================== */
:root {
  --radius: 22px;
  --gap: 18px;
  --text: #0f172a;
  --content-pad: 24px;

  /* Nền & viền */
  --main-bg: #f8fafc;      /* nền sáng */
  --sidebar-bg: #ffffff;   /* sidebar sáng */
  --header-bg: #ffffff;    /* topbar */
  --content-bg: #f9fafb;   /* nền nội dung */
  --border-color: #e5e7eb; /* viền nhạt */

  /* Sidebar width */
  --sb-w: 260px;
  --sb-wc: 78px;

  /* Topbar height */
  --tb-h: 64px;
}

/* ======================== TOÀN TRANG ======================== */
.home-page {
  position: relative;
  min-height: 100vh;
  overflow: hidden;
  color: var(--text);
  background: var(--main-bg);
}

/* ẢNH NỀN (tuỳ chọn) */
.home-page__bg { position: fixed; inset: 0; z-index: -2; }
.home-page__bg-img { width: 100%; height: 100%; object-fit: cover; filter: none; }
.home-page__overlay { display: none; }

/* ======================== SIDEBAR CỐ ĐỊNH ======================== */
.home__sidebar {
  position: fixed;
  top: var(--content-pad);
  left: var(--content-pad);
  width: var(--sb-w);
  height: calc(100vh - var(--content-pad) * 2);
  z-index: 200;
  overflow: visible;
  background: var(--sidebar-bg);
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  color: var(--text);
  padding: 12px;
}
.sb-collapsed .home__sidebar { width: var(--sb-wc); }

/* ======================== BỐ CỤC CHÍNH ======================== */
.home__wrap {
  display: flex;
  align-items: stretch;
  min-height: 100vh;
  padding: var(--content-pad);
  gap: var(--gap);
}

/* MAIN dịch phải theo chiều rộng sidebar, chỉ content cuộn */
.home__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  min-width: 0;
  margin-left: calc(var(--sb-w) + var(--gap));
  background: transparent;
  border: none;
  box-shadow: none;
  overflow: hidden;
  transition: margin-left .25s ease;
}
.sb-collapsed .home__main {
  margin-left: calc(var(--sb-wc) + var(--gap));
}

/* ======================== TOPBAR CỐ ĐỊNH ======================== */
/* ======================== TOPBAR CỐ ĐỊNH ======================== */
.home__topbar {
  position: fixed;
  z-index: 300;
  top: var(--content-pad);
  left: calc(var(--content-pad) + var(--sb-w) + var(--gap));
  right: var(--content-pad);
  height: var(--tb-h);
  display: flex;
  align-items: stretch;

  /* Bo góc và chặn tràn */
  border-radius: 16px;
  overflow: hidden;
}

/* Nền mờ (glass) */
.home__topbar .tb__wrap {
  flex: 1;
  min-width: 0;
  height: 100%;
  display: flex;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(var(--glass-blur, 22px)) saturate(var(--glass-sat, 180%));
  -webkit-backdrop-filter: blur(var(--glass-blur, 22px)) saturate(var(--glass-sat, 180%));
  border: none;
  box-shadow: none;
  border-radius: inherit;
}

/* Spacer: cho content gần như dính sát topbar */
.home__topbar-spacer {
  height: calc(var(--tb-h) - 8px); /* giảm mạnh khoảng trống, có thể về 0 nếu muốn chạm hoàn toàn */
  flex: 0 0 auto;
  margin-bottom: -4px; /* tinh chỉnh nhỏ để khít hơn */
}

/* Khi sidebar thu gọn, topbar dịch trái theo sb-wc */
.sb-collapsed .home__topbar {
  left: calc(var(--content-pad) + var(--sb-wc) + var(--gap));
}


/* ======================== CONTENT ======================== */
.home__content {
  flex: 1;
  padding: var(--content-pad);
  background: var(--content-bg);
  overflow-y: auto;
}

/* Scrollbar */
.home__content::-webkit-scrollbar { width: 8px; }
.home__content::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.25);
  border-radius: 8px;
}
.home__content::-webkit-scrollbar-thumb:hover {
  background: rgba(0,0,0,0.35);
}

/* ======================== EDGE BLEED ======================== */
.edge-bleed {
  margin-inline: calc(var(--content-pad) * -1);
  border-radius: 16px;
  background: var(--header-bg);
  border: 1px solid var(--border-color);
  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}

/* ======================== RESPONSIVE ======================== */
@media (max-width: 1024px) {
  :root { --content-pad: 20px; }
}

@media (max-width: 768px) {
  :root { --content-pad: 12px; }

  .home__main { margin-left: 0; }

  .home__sidebar {
    left: var(--content-pad);
    top: var(--content-pad);
    width: 220px;
    height: calc(100vh - var(--content-pad) * 2);
  }

  .home__topbar {
    left: var(--content-pad);
    right: var(--content-pad);
  }

  .home__content { padding: var(--content-pad); }
}

/* ======================== TOAST DƯỚI TOPBAR ======================== */
.toast-portal {
  position: fixed;
  z-index: 350;
  top: calc(var(--content-pad) + var(--tb-h) + 10px);
  right: var(--content-pad);
}
.sb-collapsed .toast-portal { right: var(--content-pad); }

@media (max-width: 768px) {
  .toast-portal { right: var(--content-pad); }
}

/* ======================== DỌN DẸP MAIN-HEADER CŨ ======================== */
.home__main-header { display: none; }
.home__main-header .tb__wrap { display: none; }
